
// PDF.js Worker - 本地版本，避免網路問題
try {
  console.log('📦 正在載入本地 PDF.js Worker...');
  
  // 嘗試載入本地 worker
  importScripts('https://unpkg.com/pdfjs-dist@4.4.168/build/pdf.worker.min.js');
  console.log('✅ PDF.js Worker 載入成功');
  
} catch (e) {
  console.warn('⚠️ 主要CDN載入失敗，嘗試備援:', e);
  
  try {
    importScripts('https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.worker.min.js');
    console.log('✅ 備援 PDF.js Worker 載入成功');
  } catch (e2) {
    console.error('❌ 所有 PDF Worker 載入失敗:', e2);
    
    // 如果所有CDN都失敗，提供簡單的fallback
    self.onmessage = function(e) {
      console.error('PDF Worker 無法載入，無法處理PDF');
      self.postMessage({
        error: 'PDF Worker載入失敗，請重新整理頁面'
      });
    };
  }
}
